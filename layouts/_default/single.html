{{ define "head" }}
<meta name="description" content="{{ .Summary }}">
{{ end }}

{{ define "main" }}
<article data-clarity-region="article">
    <section class="header">
        <section class="title-area">
            <h1 class="title"><a href="{{ .RelPermalink }}/">{{ .Title }}</a></h1>
            {{ .Render "categories" }}
        </section>
        <section class="meta-area">
            {{ if .Date }}
            <time>{{ .Date | time.Format ":date_medium" }}</time>
            {{ end }}
            <span class="delimiter"></span>
            {{ .Render "tag" }}
        </section>
    </section>

    <section class="main">
        {{- partial "expire-warning.html" . -}}
        {{ .Content }}
    </section>
    {{- if .Site.Params.Giscus.Repo }}
    <section class="comments">
        {{- partial "giscus.html" . -}}
    </section>
    {{- end }}
</article>
{{end}}

{{ define "aside" }}
{{- partial "suggestion-reading.html" . -}}
<div class="affix">
<section class="toc">
    <h3 class="title">TOC</h3>
    {{ .TableOfContents }}
</section>

{{ $related := .Site.RegularPages.Related . | first 5 }}
{{- if $related }}
<section>
    <h3>Related Post</h3>
    {{ with $related }}
    <ul>
        {{ range . }}
        <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
        {{ end }}
    </ul>
    {{ end }}
</section>
</div>
{{- end }}
{{ end }}
